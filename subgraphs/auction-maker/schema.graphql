enum AuctionStatus {
  ONGOING
  FINISHED
}

type AuctionMaker @entity {
  id: ID! # Hardcoded to Auction-maker
  auctionCount: BigInt!
  userCount: BigInt!
  bidCount: BigInt!
  finishedAuctionCount: BigInt!
  bidToken: Token!
}

type User @entity {
  id: ID!
  bids: [Bid!]! @derivedFrom(field: "user")
  auctions: [UserAuction!]! @derivedFrom(field: "user")
  createdAtBlock: BigInt!
  createdAtTimestamp: BigInt!
  modifiedAtBlock: BigInt!
  modifiedAtTimestamp: BigInt!
}

type Auction @entity {
  id: ID! # {token.id}:{token.auctionCount}
  leadingBid: Bid!
  bidToken: Token!
  rewardToken: Token!
  bidAmount: BigInt!
  rewardAmount: BigInt!
  minTTL: BigInt!
  maxTTL: BigInt!
  status: AuctionStatus!
  bids: [Bid!]! @derivedFrom(field: "auction")
  txHash: String!
  createdAtBlock: BigInt!
  createdAtTimestamp: BigInt!
  modifiedAtBlock: BigInt!
  modifiedAtTimestamp: BigInt!
}

type UserAuction @entity {
  id: ID!# {user.id}:{auction.id}
  user: User!
  auction: Auction!
}

type Bid @entity {
  id: ID! # tx hash
  user: User!
  bidToken: Token!
  rewardToken: Token!
  auction: Auction!
  amount: BigInt!
  txHash: String!
  createdAtBlock: BigInt!
  createdAtTimestamp: BigInt!
}

type Token @entity {
  id: ID!
  symbol: String!
  symbolSuccess: Boolean!
  auctionCount: BigInt!
  auctions: [Auction!] @derivedFrom(field: "rewardToken")
  name: String!
  nameSuccess: Boolean!
  decimals: BigInt!
  decimalsSuccess: Boolean!
  createdAtBlock: BigInt!
  createdAtTimestamp: BigInt!
}
